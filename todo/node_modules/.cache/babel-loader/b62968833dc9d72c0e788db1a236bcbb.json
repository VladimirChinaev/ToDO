{"ast":null,"code":"import _regeneratorRuntime from\"/home/user/Desktop/ToDO/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/user/Desktop/ToDO/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/user/Desktop/ToDO/todo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./App.css\";import TodoList from\"./TodoList/TodoList\";import{useState,useEffect}from\"react\";import SortDate from\"./mainInterface/SortDate\";import Title from\"./Title/Title\";import FilterStatus from\"./mainInterface/filterStatus\";import Input from\"./input/Input\";import Paginate from\"./pagination/Pagination\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_GET_TODOS=\"https://back-end-api-1.herokuapp.com/api/todos\";var App=function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filtered=_useState6[0],setFiltered=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),numbersOfTodos=_useState10[0],setNumbersOfTodos=_useState10[1];var todosPerPage=5;console.log(currentPage);useEffect(function(){getTodos();},[filter,currentPage]);var getTodos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var filterForQuery,href,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:filterForQuery=filter&&\"filterBy=\".concat(filter);_context.prev=1;href=API_GET_TODOS+\"?\".concat(filterForQuery,\"&page=\").concat(currentPage,\"&order=asc\");_context.next=5;return axios.get(href);case 5:result=_context.sent;setFiltered(result.data.info);setNumbersOfTodos(result.data.count);console.log();_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);alert(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function getTodos(){return _ref.apply(this,arguments);};}();console.log(\"132141254135133513412312312312\",filtered);var handleCreateTodos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,name){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;e.preventDefault();_context2.next=4;return axios.post(API_GET_TODOS,{name:name,done:\"undone\"});case 4:getTodos();setText(\"\");_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);alert(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function handleCreateTodos(_x,_x2){return _ref2.apply(this,arguments);};}();var changeStatus=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(todo){var resault;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.patch(API_GET_TODOS+\"/\".concat(todo.uuid),{name:todo.name,done:todo.done===\"done\"?\"undone\":\"done\"});case 3:resault=_context3.sent;setCurrentPage(resault.data.page);getTodos();_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);alert(_context3.t0);case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function changeStatus(_x3){return _ref3.apply(this,arguments);};}();var removeItem=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(uuid){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.delete(API_GET_TODOS+\"/\".concat(uuid));case 3:_context4.next=5;return getTodos();case 5:console.log(filtered);if(filtered.length-1===0){setCurrentPage(currentPage-1);}_context4.next=13;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);alert(_context4.t0);case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,9]]);}));return function removeItem(_x4){return _ref4.apply(this,arguments);};}();var IndexOfLastTodo=currentPage*todosPerPage;var indexOfFirstTodo=IndexOfLastTodo-todosPerPage;return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Title,{}),/*#__PURE__*/_jsx(\"div\",{className:\"mainInput\",children:/*#__PURE__*/_jsx(Input,{text:text,setText:setText,handleCreateTodos:handleCreateTodos})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mainInterface\",children:[/*#__PURE__*/_jsx(FilterStatus,{setFilter:setFilter}),/*#__PURE__*/_jsx(SortDate,{filtered:filtered,setFiltered:setFiltered})]}),/*#__PURE__*/_jsx(\"div\",{className:\"todoList\",children:/*#__PURE__*/_jsx(TodoList,{filtered:filtered,removeItem:removeItem,changeStatus:changeStatus,getTodos:getTodos,IndexOfLastTodo:IndexOfLastTodo,indexOfFirstTodo:indexOfFirstTodo})}),/*#__PURE__*/_jsx(Paginate,{todosPerPage:todosPerPage,numbersOfTodos:numbersOfTodos,setCurrentPage:setCurrentPage,getTodos:getTodos,currentPage:currentPage})]});};export default App;","map":{"version":3,"sources":["/home/user/Desktop/ToDO/todo/src/App.js"],"names":["TodoList","useState","useEffect","SortDate","Title","FilterStatus","Input","Paginate","axios","API_GET_TODOS","App","text","setText","filter","setFilter","filtered","setFiltered","currentPage","setCurrentPage","numbersOfTodos","setNumbersOfTodos","todosPerPage","console","log","getTodos","filterForQuery","href","get","result","data","info","count","alert","handleCreateTodos","e","name","preventDefault","post","done","changeStatus","todo","patch","uuid","resault","page","removeItem","delete","length","IndexOfLastTodo","indexOfFirstTodo"],"mappings":"sbAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,QAAP,KAAqB,qBAArB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,QAAP,KAAqB,0BAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFACA,GAAMC,CAAAA,aAAa,CAAG,gDAAtB,CACA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CACd,cAAwBT,QAAQ,CAAC,EAAD,CAAhC,wCAAOU,IAAP,eAAaC,OAAb,eACA,eAA4BX,QAAQ,CAAC,EAAD,CAApC,yCAAOY,MAAP,eAAeC,SAAf,eACA,eAAgCb,QAAQ,CAAC,EAAD,CAAxC,yCAAOc,QAAP,eAAiBC,WAAjB,eACA,eAAsCf,QAAQ,CAAC,CAAD,CAA9C,yCAAOgB,WAAP,eAAoBC,cAApB,eACA,eAA4CjB,QAAQ,EAApD,0CAAOkB,cAAP,gBAAuBC,iBAAvB,gBACA,GAAMC,CAAAA,YAAY,CAAG,CAArB,CACAC,OAAO,CAACC,GAAR,CAAYN,WAAZ,EACAf,SAAS,CAAC,UAAM,CACZsB,QAAQ,GACX,CAFQ,CAEN,CAACX,MAAD,CAASI,WAAT,CAFM,CAAT,CAIA,GAAMO,CAAAA,QAAQ,0FAAG,kKACPC,cADO,CACUZ,MAAM,qBAAgBA,MAAhB,CADhB,iBAGHa,IAHG,CAILjB,aAAa,YAAOgB,cAAP,kBAA8BR,WAA9B,cAJR,uBAKYT,CAAAA,KAAK,CAACmB,GAAN,CAAUD,IAAV,CALZ,QAKHE,MALG,eAMTZ,WAAW,CAACY,MAAM,CAACC,IAAP,CAAYC,IAAb,CAAX,CACAV,iBAAiB,CAACQ,MAAM,CAACC,IAAP,CAAYE,KAAb,CAAjB,CACAT,OAAO,CAACC,GAAR,GARS,iFAUTS,KAAK,aAAL,CAVS,qEAAH,kBAARR,CAAAA,QAAQ,0CAAd,CAaAF,OAAO,CAACC,GAAR,CAAY,gCAAZ,CAA8CR,QAA9C,EACA,GAAMkB,CAAAA,iBAAiB,2FAAG,kBAAOC,CAAP,CAAUC,IAAV,uIAElBD,CAAC,CAACE,cAAF,GAFkB,uBAGZ5B,CAAAA,KAAK,CAAC6B,IAAN,CAAW5B,aAAX,CAA0B,CAC5B0B,IAAI,CAAEA,IADsB,CAE5BG,IAAI,CAAE,QAFsB,CAA1B,CAHY,QAOlBd,QAAQ,GACRZ,OAAO,CAAC,EAAD,CAAP,CARkB,mFAUlBU,OAAO,CAACC,GAAR,eACAS,KAAK,cAAL,CAXkB,sEAAH,kBAAjBC,CAAAA,iBAAiB,iDAAvB,CAeA,GAAMM,CAAAA,YAAY,2FAAG,kBAAOC,IAAP,0KAEShC,CAAAA,KAAK,CAACiC,KAAN,CAAYhC,aAAa,YAAO+B,IAAI,CAACE,IAAZ,CAAzB,CAA6C,CAC/DP,IAAI,CAAEK,IAAI,CAACL,IADoD,CAE/DG,IAAI,CAAEE,IAAI,CAACF,IAAL,GAAc,MAAd,CAAuB,QAAvB,CAAkC,MAFuB,CAA7C,CAFT,QAEPK,OAFO,gBAMbzB,cAAc,CAACyB,OAAO,CAACd,IAAR,CAAae,IAAd,CAAd,CACApB,QAAQ,GAPK,mFASbF,OAAO,CAACC,GAAR,eACAS,KAAK,cAAL,CAVa,sEAAH,kBAAZO,CAAAA,YAAY,8CAAlB,CAcA,GAAMM,CAAAA,UAAU,2FAAG,kBAAOH,IAAP,8JAELlC,CAAAA,KAAK,CAACsC,MAAN,CAAarC,aAAa,YAAOiC,IAAP,CAA1B,CAFK,+BAGLlB,CAAAA,QAAQ,EAHH,QAIXF,OAAO,CAACC,GAAR,CAAYR,QAAZ,EACA,GAAIA,QAAQ,CAACgC,MAAT,CAAkB,CAAlB,GAAwB,CAA5B,CAA+B,CAC3B7B,cAAc,CAACD,WAAW,CAAG,CAAf,CAAd,CACH,CAPU,mFASXK,OAAO,CAACC,GAAR,eACAS,KAAK,cAAL,CAVW,sEAAH,kBAAVa,CAAAA,UAAU,8CAAhB,CAcA,GAAMG,CAAAA,eAAe,CAAG/B,WAAW,CAAGI,YAAtC,CACA,GAAM4B,CAAAA,gBAAgB,CAAGD,eAAe,CAAG3B,YAA3C,CAEA,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,KAAC,KAAD,IADJ,cAEI,YAAK,SAAS,CAAC,WAAf,uBACI,KAAC,KAAD,EACI,IAAI,CAAEV,IADV,CAEI,OAAO,CAAEC,OAFb,CAGI,iBAAiB,CAAEqB,iBAHvB,EADJ,EAFJ,cASI,aAAK,SAAS,CAAC,eAAf,wBACI,KAAC,YAAD,EAAc,SAAS,CAAEnB,SAAzB,EADJ,cAEI,KAAC,QAAD,EAAU,QAAQ,CAAEC,QAApB,CAA8B,WAAW,CAAEC,WAA3C,EAFJ,GATJ,cAaI,YAAK,SAAS,CAAC,UAAf,uBACI,KAAC,QAAD,EACI,QAAQ,CAAED,QADd,CAEI,UAAU,CAAE8B,UAFhB,CAGI,YAAY,CAAEN,YAHlB,CAII,QAAQ,CAAEf,QAJd,CAKI,eAAe,CAAEwB,eALrB,CAMI,gBAAgB,CAAEC,gBANtB,EADJ,EAbJ,cAuBI,KAAC,QAAD,EACI,YAAY,CAAE5B,YADlB,CAEI,cAAc,CAAEF,cAFpB,CAGI,cAAc,CAAED,cAHpB,CAII,QAAQ,CAAEM,QAJd,CAKI,WAAW,CAAEP,WALjB,EAvBJ,GADJ,CAiCH,CAzGD,CA2GA,cAAeP,CAAAA,GAAf","sourcesContent":["import \"./App.css\";\nimport TodoList from \"./TodoList/TodoList\";\nimport { useState, useEffect } from \"react\";\nimport SortDate from \"./mainInterface/SortDate\";\nimport Title from \"./Title/Title\";\nimport FilterStatus from \"./mainInterface/filterStatus\";\nimport Input from \"./input/Input\";\nimport Paginate from \"./pagination/Pagination\";\nimport axios from \"axios\";\nconst API_GET_TODOS = \"https://back-end-api-1.herokuapp.com/api/todos\";\nconst App = () => {\n    const [text, setText] = useState(\"\");\n    const [filter, setFilter] = useState(\"\");\n    const [filtered, setFiltered] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [numbersOfTodos, setNumbersOfTodos] = useState();\n    const todosPerPage = 5;\n    console.log(currentPage);\n    useEffect(() => {\n        getTodos();\n    }, [filter, currentPage]);\n\n    const getTodos = async () => {\n        const filterForQuery = filter && `filterBy=${filter}`;\n        try {\n            const href =\n                API_GET_TODOS + `?${filterForQuery}&page=${currentPage}&order=asc`;\n            const result = await axios.get(href);\n            setFiltered(result.data.info);\n            setNumbersOfTodos(result.data.count);\n            console.log();\n        } catch (err) {\n            alert(err);\n        }\n    };\n    console.log(\"132141254135133513412312312312\", filtered);\n    const handleCreateTodos = async (e, name) => {\n        try {\n            e.preventDefault();\n            await axios.post(API_GET_TODOS, {\n                name: name,\n                done: \"undone\",\n            });\n            getTodos();\n            setText(\"\");\n        } catch (err) {\n            console.log(err);\n            alert(err);\n        }\n    };\n\n    const changeStatus = async (todo) => {\n        try {\n            const resault = await axios.patch(API_GET_TODOS + `/${todo.uuid}`, {\n                name: todo.name,\n                done: todo.done === \"done\" ? \"undone\" : \"done\",\n            });\n            setCurrentPage(resault.data.page);\n            getTodos();\n        } catch (err) {\n            console.log(err);\n            alert(err);\n        }\n    };\n\n    const removeItem = async (uuid) => {\n        try {\n            await axios.delete(API_GET_TODOS + `/${uuid}`);\n            await getTodos();\n            console.log(filtered);\n            if (filtered.length - 1 === 0) {\n                setCurrentPage(currentPage - 1);\n            }\n        } catch (err) {\n            console.log(err);\n            alert(err);\n        }\n    };\n\n    const IndexOfLastTodo = currentPage * todosPerPage;\n    const indexOfFirstTodo = IndexOfLastTodo - todosPerPage;\n\n    return (\n        <div className=\"container\">\n            <Title />\n            <div className=\"mainInput\">\n                <Input\n                    text={text}\n                    setText={setText}\n                    handleCreateTodos={handleCreateTodos}\n                />\n            </div>\n            <div className=\"mainInterface\">\n                <FilterStatus setFilter={setFilter} />\n                <SortDate filtered={filtered} setFiltered={setFiltered} />\n            </div>\n            <div className=\"todoList\">\n                <TodoList\n                    filtered={filtered}\n                    removeItem={removeItem}\n                    changeStatus={changeStatus}\n                    getTodos={getTodos}\n                    IndexOfLastTodo={IndexOfLastTodo}\n                    indexOfFirstTodo={indexOfFirstTodo}\n                />\n            </div>\n            <Paginate\n                todosPerPage={todosPerPage}\n                numbersOfTodos={numbersOfTodos}\n                setCurrentPage={setCurrentPage}\n                getTodos={getTodos}\n                currentPage={currentPage}\n            />\n        </div>\n    );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}